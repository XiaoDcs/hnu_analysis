# æ¹–å—å¤§å­¦å¹¿ä¸œçœæ‹›ç”Ÿæ•°æ®åˆ†æç³»ç»Ÿ

> åŸºäºæ¹–å—å¤§å­¦å®˜æ–¹APIçš„å¹¿ä¸œçœæ‹›ç”Ÿæ•°æ®å¯è§†åŒ–åˆ†æç³»ç»Ÿ

[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://www.python.org)
[![Flask](https://img.shields.io/badge/Flask-3.1.1-green.svg)](https://flask.palletsprojects.com)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

## ğŸ“Š é¡¹ç›®æ¦‚è§ˆ

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ‹›ç”Ÿæ•°æ®åˆ†æç³»ç»Ÿï¼Œä¸“é—¨åˆ†ææ¹–å—å¤§å­¦åœ¨å¹¿ä¸œçœ2020-2025å¹´çš„æ‹›ç”Ÿæƒ…å†µã€‚é€šè¿‡å¤šç»´åº¦çš„æ•°æ®å¯è§†åŒ–ï¼Œå¸®åŠ©ç”¨æˆ·æ·±å…¥äº†è§£ä¸“ä¸šè®¾ç½®ã€æ‹›ç”Ÿè¶‹åŠ¿å’Œå­¦é™¢åˆ†å¸ƒã€‚

### ğŸ¯ æ•°æ®æ¦‚å†µ

- **ğŸ“… æ—¶é—´èŒƒå›´**: 2020-2025å¹´ï¼ˆ6å¹´å®Œæ•´æ•°æ®ï¼‰
- **ğŸ“ˆ æ•°æ®è§„æ¨¡**: 353æ¡è®°å½•ï¼Œ80ä¸ªä¸“ä¸šï¼Œ29ä¸ªå­¦é™¢
- **ğŸ‘¥ æ€»æ‹›ç”Ÿæ•°**: 6å¹´ç´¯è®¡1606äºº
- **ğŸ” æ•°æ®æ¥æº**: æ¹–å—å¤§å­¦å®˜æ–¹æ‹›ç”ŸAPI

### ğŸŒŸ æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½æ¨¡å— | æè¿° | ç‰¹è‰² |
|---------|------|------|
| ğŸ“Š **æ€»è§ˆåˆ†æ** | å¹´åº¦è¶‹åŠ¿ä¸ä¸“ä¸šåˆ†å¸ƒ | äº¤äº’å¼å›¾è¡¨ï¼Œå…³é”®è¯ç­›é€‰ |
| ğŸ“ **ä¸“ä¸šç»Ÿè®¡** | å•ä¸“ä¸šå†å¹´è¯¦ç»†æ•°æ® | æŠ˜çº¿å›¾è¶‹åŠ¿ï¼Œè¯¦ç»†è¡¨æ ¼ |
| ğŸ« **å­¦é™¢åˆ†æ** | æŒ‰å­¦é™¢ç»´åº¦åˆ†ææ‹›ç”Ÿ | æŠ˜å å¼å±•ç¤ºï¼Œä¸“ä¸šè®¾ç½® |
| ğŸ“ˆ **ä¸“ä¸šå¯¹æ¯”** | æ¨ªå‘å¯¹æ¯”è¡¨æ ¼ | å¤šæ’åºæ–¹å¼ï¼ŒCSVå¯¼å‡º |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.8+
- Flask 3.1.1
- pandas 2.2.3
- requests 2.32.4

### å®‰è£…æ­¥éª¤

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/XiaoDcs/hnu_analysis.git
cd hnu_analysis

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate  # macOS/Linux
# venv\Scripts\activate   # Windows

# 3. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 4. è¿è¡Œåº”ç”¨
python app.py
```

### è®¿é—®åº”ç”¨

å¯åŠ¨åè®¿é—®ä»¥ä¸‹åœ°å€ï¼š

- ğŸ  **æ€»è§ˆé¡µé¢**: http://127.0.0.1:5000
- ğŸ“ **ä¸“ä¸šç»Ÿè®¡**: http://127.0.0.1:5000/guangdong  
- ğŸ« **å­¦é™¢åˆ†æ**: http://127.0.0.1:5000/departments
- ğŸ“ˆ **ä¸“ä¸šå¯¹æ¯”**: http://127.0.0.1:5000/comparison

## ğŸ“– åŠŸèƒ½è¯¦è§£

### 1. æ€»è§ˆåˆ†æé¡µé¢ (/)

**ä¸»è¦åŠŸèƒ½ï¼š**
- ğŸ“ˆ å¹´åº¦æ‹›ç”Ÿæ€»äººæ•°è¶‹åŠ¿å›¾
- ğŸ“Š ä¸“ä¸šæ‹›ç”Ÿåˆ†å¸ƒï¼ˆæ¨ªå‘æŸ±çŠ¶å›¾ï¼‰
- ğŸ” ä¸“ä¸šå…³é”®è¯ç­›é€‰
- ğŸ“‹ æ•°æ®ç»Ÿè®¡å¡ç‰‡

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
- è¾“å…¥"è®¡ç®—æœº"ç­›é€‰ç›¸å…³ä¸“ä¸š
- åˆ‡æ¢å¹´ä»½æŸ¥çœ‹ä¸åŒå¹´åº¦çš„ä¸“ä¸šåˆ†å¸ƒ
- æŸ¥çœ‹6å¹´æ€»æ‹›ç”Ÿè¶‹åŠ¿å˜åŒ–

### 2. ä¸“ä¸šç»Ÿè®¡é¡µé¢ (/guangdong)

**ä¸»è¦åŠŸèƒ½ï¼š**
- ğŸ“‹ 80ä¸ªä¸“ä¸šä¸‹æ‹‰é€‰æ‹©
- ğŸ“Š ä¸“ä¸šå†å¹´æ‹›ç”Ÿè¶‹åŠ¿å›¾
- ğŸ“ è¯¦ç»†æ•°æ®è¡¨æ ¼ï¼ˆæŒ‰å¹´ä»½å±•ç¤ºï¼‰
- ğŸ“ˆ 6å¹´æ€»è®¡ç»Ÿè®¡

**çƒ­é—¨ä¸“ä¸šç¤ºä¾‹ï¼š**

| ä¸“ä¸š | 2020 | 2021 | 2022 | 2023 | 2024 | 2025 | æ€»è®¡ |
|------|------|------|------|------|------|------|------|
| ç”µæ°”å·¥ç¨‹åŠå…¶è‡ªåŠ¨åŒ– | 11 | 12 | 12 | 12 | 16 | 20 | **83** |
| é‡‘èå­¦ | 15 | 15 | 13 | 12 | 9 | 8 | **72** |
| è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ | 3 | 4 | 5 | 6 | 10 | 15 | **43** |

### 3. å­¦é™¢åˆ†æé¡µé¢ (/departments)

**ä¸»è¦åŠŸèƒ½ï¼š**
- ğŸ« 29ä¸ªå­¦é™¢æŒ‰æ‹›ç”Ÿæ•°æ’åº
- ğŸ“… å¹´ä»½ç­›é€‰åŠŸèƒ½
- ğŸ“‚ æŠ˜å å¼å±•ç¤ºå„å­¦é™¢è¯¦æƒ…
- ğŸ¯ å±•ç¤ºæ¯å¹´çš„ä¸“ä¸šè®¾ç½®å’Œæ‹›ç”Ÿè®¡åˆ’

**TOP5å­¦é™¢ï¼ˆæŒ‰æ€»æ‹›ç”Ÿæ•°ï¼‰ï¼š**
1. **ä¿¡æ¯ç§‘å­¦ä¸å·¥ç¨‹å­¦é™¢**: 172äºº
2. **ç”µæ°”ä¸ä¿¡æ¯å·¥ç¨‹å­¦é™¢**: 147äºº  
3. **æœºæ¢°ä¸è¿è½½å·¥ç¨‹å­¦é™¢**: 136äºº
4. **é‡‘èä¸ç»Ÿè®¡å­¦é™¢**: 114äºº
5. **åœŸæœ¨å·¥ç¨‹å­¦é™¢**: 108äºº

### 4. ä¸“ä¸šå¯¹æ¯”é¡µé¢ (/comparison)

**ä¸»è¦åŠŸèƒ½ï¼š**
- ğŸ“Š 80ä¸ªä¸“ä¸šçš„æ¨ªå‘å¯¹æ¯”è¡¨æ ¼
- ğŸ” å…³é”®è¯ç­›é€‰ï¼ˆå¦‚"è®¡ç®—æœº"ã€"å·¥ç¨‹"ï¼‰
- ğŸ”„ å¤šç§æ’åºæ–¹å¼ï¼šæ€»æ•°/æœ€æ–°å¹´ä»½/ä¸“ä¸šåç§°
- ğŸ’¾ CSVæ•°æ®å¯¼å‡ºåŠŸèƒ½
- ğŸ¨ æ•°æ®å¯è§†åŒ–ï¼ˆæœ€é«˜å€¼é«˜äº®æ˜¾ç¤ºï¼‰

**å¯¹æ¯”ç»´åº¦ï¼š**
- å„å¹´ä»½æ‹›ç”Ÿäººæ•°
- 6å¹´æ€»è®¡æ•°
- å¹´å‡æ‹›ç”Ÿæ•°
- æœ€é«˜/æœ€ä½å¹´ä»½æ•°æ®

## ğŸ›  æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ

- **ğŸ Python**: æ ¸å¿ƒå¼€å‘è¯­è¨€
- **ğŸŒ¶ Flask**: Webæ¡†æ¶
- **ğŸ¼ pandas**: æ•°æ®å¤„ç†ä¸åˆ†æ
- **ğŸ“¡ requests**: HTTPè¯·æ±‚å¤„ç†

### å‰ç«¯æŠ€æœ¯æ ˆ

- **ğŸ¨ HTML5 + CSS3**: å“åº”å¼UIè®¾è®¡
- **ğŸ“Š Chart.js**: äº¤äº’å¼å›¾è¡¨åº“
- **âš¡ åŸç”ŸJavaScript**: å‰ç«¯äº¤äº’é€»è¾‘

### æ•°æ®å¤„ç†

```python
# æ ¸å¿ƒæ•°æ®å¤„ç†æµç¨‹
def load_guangdong_dataset():
    """åŠ è½½å¹¿ä¸œçœæ•°æ®å¹¶è½¬æ¢ä¸ºDataFrame"""
    with open(GUANGDONG_DATA_FILE, 'r', encoding='utf-8') as f:
        guangdong_data = json.load(f)
    
    # æ•°æ®æ ‡å‡†åŒ–å¤„ç†
    rows = []
    for year_str, year_data in guangdong_data.items():
        year = int(year_str)
        for item in year_data:
            rows.append({
                "year": year,
                "province": "å¹¿ä¸œ",
                "major": item.get("zymc", ""),
                "department": item.get("yxmc", ""),
                "exam_category": item.get("kl", ""),
                "plan_type": item.get("jhlbmc", ""),
                "duration": item.get("xz", ""),
                "count": int(item.get("zsrs", 0))
            })
    
    return pd.DataFrame(rows)
```

## ğŸ“¡ API æ¥å£æ–‡æ¡£

### æ•°æ®ç»Ÿè®¡ API
```http
GET /api/stats
```
**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "total_records": 353,
  "total_majors": 80,
  "total_students": 1606,
  "years_covered": [2020, 2021, 2022, 2023, 2024, 2025],
  "sample_majors": ["äº§å“è®¾è®¡", "äººå·¥æ™ºèƒ½", "ä¼šè®¡å­¦", ...]
}
```

### ä¸“ä¸šåˆ—è¡¨ API
```http
GET /api/guangdong_majors
```

### ä¸“ä¸šè¶‹åŠ¿ API
```http
GET /api/guangdong_major_trend?major=ä¿¡æ¯å®‰å…¨
```

### å­¦é™¢åˆ†æ API
```http
GET /api/department_analysis?year=2025
```

### ä¸“ä¸šå¯¹æ¯” API
```http
GET /api/major_comparison?keyword=è®¡ç®—æœº&sort_by=total
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
hnu_analysis/
â”œâ”€â”€ app.py                          # Flaskä¸»åº”ç”¨
â”œâ”€â”€ requirements.txt                # ä¾èµ–åŒ…åˆ—è¡¨
â”œâ”€â”€ download_data_fixed.py          # æ•°æ®ä¸‹è½½è„šæœ¬
â”œâ”€â”€ guangdong_data_fixed.json       # ä¸»æ•°æ®æ–‡ä»¶
â”œâ”€â”€ sample.json                     # æ ·æœ¬æ•°æ®
â”œâ”€â”€ README.md                       # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ .gitignore                      # Gitå¿½ç•¥æ–‡ä»¶
â””â”€â”€ templates/                      # å‰ç«¯æ¨¡æ¿
    â”œâ”€â”€ index_guangdong.html        # æ€»è§ˆé¡µé¢
    â”œâ”€â”€ guangdong.html              # ä¸“ä¸šç»Ÿè®¡é¡µé¢
    â”œâ”€â”€ departments.html            # å­¦é™¢åˆ†æé¡µé¢
    â””â”€â”€ comparison.html             # ä¸“ä¸šå¯¹æ¯”é¡µé¢
```

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½

1. **æ–°å¢APIç«¯ç‚¹**ï¼šåœ¨`app.py`ä¸­æ·»åŠ è·¯ç”±
2. **åˆ›å»ºå‰ç«¯é¡µé¢**ï¼šåœ¨`templates/`ç›®å½•æ·»åŠ HTMLæ¨¡æ¿
3. **æ›´æ–°å¯¼èˆª**ï¼šåœ¨å„é¡µé¢æ¨¡æ¿ä¸­æ·»åŠ å¯¼èˆªé“¾æ¥

### æ•°æ®æ›´æ–°

ä½¿ç”¨æ•°æ®ä¸‹è½½è„šæœ¬æ›´æ–°æ•°æ®ï¼š

```bash
python download_data_fixed.py
```

### æœ¬åœ°å¼€å‘

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
python app.py

# è®¿é—®å¼€å‘ç¯å¢ƒ
http://127.0.0.1:5000
```

## ğŸ“Š æ•°æ®æºè¯´æ˜

**æ•°æ®æ¥æº**: æ¹–å—å¤§å­¦æ‹›ç”Ÿç½‘å®˜æ–¹API
- **APIåœ°å€**: `https://admi2.hnu.edu.cn/lnzsjhSearch`
- **æ•°æ®å®Œæ•´æ€§**: 2020-2025å¹´å®Œæ•´è¦†ç›–
- **æ•°æ®å‡†ç¡®æ€§**: ç›´æ¥æ¥æºäºå®˜æ–¹ç³»ç»Ÿï¼Œç¡®ä¿å‡†ç¡®æ€§

**è¯·æ±‚å¤´é…ç½®**:
```python
headers = {
    'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36',
    'Accept': 'application/json, text/plain, */*',
    'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8',
    'Accept-Encoding': 'gzip, deflate, br',
    'Connection': 'keep-alive',
    'Referer': 'https://admi2.hnu.edu.cn/'
}
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºä½ çš„åŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤ä½ çš„æ”¹åŠ¨ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ä¸€ä¸ª Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä½¿ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ™ è‡´è°¢

- æ¹–å—å¤§å­¦æ‹›ç”ŸåŠå…¬å®¤æä¾›çš„æ•°æ®æ”¯æŒ
- Chart.js æä¾›çš„ä¼˜ç§€å›¾è¡¨åº“
- Flask ç¤¾åŒºçš„æŠ€æœ¯æ”¯æŒ

## ğŸ“ è”ç³»æ–¹å¼

- **é¡¹ç›®åœ°å€**: https://github.com/XiaoDcs/hnu_analysis
- **é—®é¢˜åé¦ˆ**: [Issues](https://github.com/XiaoDcs/hnu_analysis/issues)

---

<div align="center">

**ğŸ“ ä¸ºæ¹–å—å¤§å­¦æ‹›ç”Ÿæ•°æ®åˆ†æè€Œç”Ÿ**

Made with â¤ï¸ by [XiaoDcs](https://github.com/XiaoDcs)

</div>

## ğŸŒ åœ¨çº¿éƒ¨ç½²

### éƒ¨ç½²åˆ°Render

1. **Forkä»“åº“**åˆ°ä½ çš„GitHubè´¦å·
2. **ç™»å½•Render**: https://render.com
3. **åˆ›å»ºæ–°çš„Web Service**
   - è¿æ¥ä½ çš„GitHubä»“åº“
   - é€‰æ‹©`hnu_analysis`é¡¹ç›®
4. **é…ç½®éƒ¨ç½²**:
   ```
   Build Command: pip install -r requirements.txt
   Start Command: gunicorn --bind 0.0.0.0:$PORT app:app
   ```
5. **ç¯å¢ƒå˜é‡**ï¼ˆå¯é€‰ï¼‰:
   - `PYTHON_VERSION`: 3.8.10

### ä¸€é”®éƒ¨ç½²æŒ‰é’®

[![Deploy to Render](https://render.com/images/deploy-to-render-button.svg)](https://render.com/deploy?repo=https://github.com/XiaoDcs/hnu_analysis)

éƒ¨ç½²å®Œæˆåï¼Œä½ å°†è·å¾—ä¸€ä¸ªç±»ä¼¼ `https://your-app.onrender.com` çš„åœ¨çº¿åœ°å€ã€‚

### éƒ¨ç½²è¯´æ˜

- **å¯åŠ¨æ—¶é—´**: é¦–æ¬¡è®¿é—®å¯èƒ½éœ€è¦30-60ç§’å†·å¯åŠ¨
- **å…è´¹å¥—é¤**: Renderå…è´¹å¥—é¤å®Œå…¨æ”¯æŒæœ¬é¡¹ç›®
- **è‡ªåŠ¨éƒ¨ç½²**: æ¨é€åˆ°mainåˆ†æ”¯å°†è‡ªåŠ¨è§¦å‘é‡æ–°éƒ¨ç½²

## ğŸ”§ å¼€å‘æŒ‡å— 